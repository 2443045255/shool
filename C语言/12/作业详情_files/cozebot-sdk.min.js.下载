const CozeBotSDK=function(){let e="https://stat2-ans.chaoxing.com",t="",n="",o=!1,r=!1,i="",l="",a=!1;function d(){document.querySelectorAll(".closeComlilation, .slideUp").forEach((e=>{e.addEventListener("click",(()=>{document.getElementById("cozeBx").style="display:none"}))}))}return{init:function(c){!function(e){if(!e.appId)throw new Error("Invalid configuration: appId is required.");if(!e.botId)throw new Error("Invalid configuration: botId is required.");if(!e.rootElementId)throw new Error("Invalid configuration: rootElementId is required.");if(!e.upload)throw new Error("Invalid configuration: upload is required.")}(c),t=c.appId,n=c.botId,o=c.bogColorNone,l=c.rootElementId,r=c.isFullScreen,i=c.skipUrl,a=c.upload,function(){const t=document.createElement("link");t.type="text/css",t.rel="stylesheet",t.href=e+"/stat2/style/cozebot/style.css",document.head.appendChild(t)}(),function(o){if(document.querySelector(".cozeBx"))return;const r=document.createElement("div");r.className="cozeBx",r.id="cozeBx",r.style="display:none";const i=document.createElement("span");i.className="slideUp";const d=document.createElement("div");d.className="compil_tit_option";const c=document.createElement("span");c.className="fullScreenBtn",c.style="display:none";const s=document.createElement("a");s.id="fullScreenBtn",s.href="",s.target="_blank",s.style="display:block;height:16px",c.appendChild(s);const u=document.createElement("span");u.className="splitLine",u.style="display:none";const m=document.createElement("span");m.className="closeComlilation",d.appendChild(c),d.appendChild(u),d.appendChild(m),o.isHideRetractBtn||r.appendChild(i),r.appendChild(d);const p=document.createElement("iframe");p.frameBorder="0",p.style.position="relative",p.style.width="100%",p.style.height="100%",p.src=e+"/bot/index?bgColorNone=true&bot_id="+n+"&app_id="+t+"&upload="+a+"&sdkFlag=true",p.id="cozeIframe",r.appendChild(p),document.getElementById(l).appendChild(r)}(c),function(){if(r){let e=document.getElementById("fullScreenBtn");e.href=i,e.parentNode.style="display:block",document.getElementById("fullScreenBtn").parentNode.nextElementSibling.style="display:block"}}(),d()},sendToIframeMessage:function(t){if(void 0===t.eventName||""===t.eventName)throw new Error("Invalid configuration: eventName is required.");document.getElementById("cozeIframe").contentWindow.postMessage(t,e),document.getElementById("cozeBx").style="display:block"},sendToIframeImage:function(n){const o=n.fileInputId,r=document.getElementById(o).files[0];if(void 0===r)throw new Error("Invalid configuration: file is required.");const i=r.name,l=r.type;return n.fileName=i,n.fileType=l,n.appId=t,new Promise(((t,o)=>{const i=new FileReader;i.onload=function(o){const r=o.target.result;n.arrayBuffer=r;document.getElementById("cozeIframe").contentWindow.postMessage(n,e),t(r)},i.onerror=function(e){o(new Error("File could not be read: "+e.target.error.code))},i.readAsArrayBuffer(r)}))},sendToIframeImageBase64:function(t){const n=t.imageBase64;if(!n)throw new Error("Invalid configuration: base64 data is required.");const[o,r]=n.split(","),i=o.split(":")[1].split(";")[0],l=(new Date).getTime()+"_preset"+`.${i.split("/")[1]}`;return t.fileType=i,t.fileName=l,new Promise(((o,r)=>{const l=atob(n.split(",")[1]),a=new Uint8Array(l.length);for(let e=0;e<l.length;e++)a[e]=l.charCodeAt(e);const d=new Blob([a],{type:i}),c=new FileReader;c.onload=function(n){const r=n.target.result;t.arrayBuffer=r;document.getElementById("cozeIframe").contentWindow.postMessage(t,e),o(r)},c.onerror=function(e){r(new Error("File could not be read: "+e.target.error.code))},c.readAsArrayBuffer(d)}))}}}();window.CozeBotSDK=CozeBotSDK;